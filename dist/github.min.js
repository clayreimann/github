!function(e,t){if("function"==typeof define&&define.amd)define(["module","utf8","axios","base-64","es6-promise"],t);else if("undefined"!=typeof exports)t(module,require("utf8"),require("axios"),require("base-64"),require("es6-promise"));else{var n={exports:{}};t(n,e.utf8,e.axios,e.base64,e.Promise),e.github=n.exports}}(this,function(e,t,n,o,s){"use strict";function i(e){return o.encode(t.encode(e))}function u(e){e=e||{};var o=e.apiUrl||"https://api.github.com",s=u._request=function(t,s,u,a,c){function f(){var e=s.indexOf("//")>=0?s:o+s;if(e+=/\?/.test(e)?"&":"?",u&&"object"===("undefined"==typeof u?"undefined":r(u))&&["GET","HEAD","DELETE"].indexOf(t)>-1)for(var n in u)u.hasOwnProperty(n)&&(e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(u[n]));return e.replace(/(&timestamp=\d+)/,"")+("undefined"!=typeof window?"&timestamp="+(new Date).getTime():"")}var l={headers:{Accept:c?"application/vnd.github.v3.raw+json":"application/vnd.github.v3+json","Content-Type":"application/json;charset=UTF-8"},method:t,data:u?u:{},url:f()};return(e.token||e.username&&e.password)&&(l.headers.Authorization=e.token?"token "+e.token:"Basic "+i(e.username+":"+e.password)),n(l).then(function(e){a(null,e.data||!0,e)},function(e){304===e.status?a(null,e.data||!0,e):a({path:s,request:e,error:e.status})})},a=u._requestAllPages=function(e,t,n){var o=[];!function i(){s("GET",e,null,function(s,u,r){if(s)return n(s);u instanceof Array||(u=[u]),o.push.apply(o,u);var a=(r.headers.link||"").split(",").filter(function(e){return/rel="next"/.test(e)}).map(function(e){return(/<(.*)>/.exec(e)||[])[1]}).pop();!a||t?n(s,o,r):(e=a,i())})}()};return u.User=function(){this.repos=function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};var n="/user/repos",o=[];o.push("type="+encodeURIComponent(e.type||"all")),o.push("sort="+encodeURIComponent(e.sort||"updated")),o.push("per_page="+encodeURIComponent(e.per_page||"100")),e.page&&o.push("page="+encodeURIComponent(e.page)),n+="?"+o.join("&"),a(n,!!e.page,t)},this.orgs=function(e){s("GET","/user/orgs",null,e)},this.gists=function(e){s("GET","/gists",null,e)},this.notifications=function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};var n="/notifications",o=[];if(e.all&&o.push("all=true"),e.participating&&o.push("participating=true"),e.since){var i=e.since;i.constructor===Date&&(i=i.toISOString()),o.push("since="+encodeURIComponent(i))}if(e.before){var u=e.before;u.constructor===Date&&(u=u.toISOString()),o.push("before="+encodeURIComponent(u))}e.page&&o.push("page="+encodeURIComponent(e.page)),o.length>0&&(n+="?"+o.join("&")),s("GET",n,null,t)},this.show=function(e,t){var n=e?"/users/"+e:"/user";s("GET",n,null,t)},this.userRepos=function(e,t,n){"function"==typeof t&&(n=t,t={});var o="/users/"+e+"/repos",s=[];s.push("type="+encodeURIComponent(t.type||"all")),s.push("sort="+encodeURIComponent(t.sort||"updated")),s.push("per_page="+encodeURIComponent(t.per_page||"100")),t.page&&s.push("page="+encodeURIComponent(t.page)),o+="?"+s.join("&"),a(o,!!t.page,n)},this.userStarred=function(e,t){var n="/users/"+e+"/starred?type=all&per_page=100";a(n,!1,t)},this.userGists=function(e,t){s("GET","/users/"+e+"/gists",null,t)},this.orgRepos=function(e,t){var n="/orgs/"+e+"/repos?type=all&&page_num=100&sort=updated&direction=desc";a(n,!1,t)},this.follow=function(e,t){s("PUT","/user/following/"+e,null,t)},this.unfollow=function(e,t){s("DELETE","/user/following/"+e,null,t)},this.createRepo=function(e,t){s("POST","/user/repos",e,t)}},u.Repository=function(e){function n(e,t){return e===l.branch&&l.sha?t(null,l.sha):void f.getRef("heads/"+e,function(n,o){l.branch=e,l.sha=o,t(n,o)})}var o,r=e.name,a=e.user,c=e.fullname,f=this;o=c?"/repos/"+c:"/repos/"+a+"/"+r;var l={branch:null,sha:null};this.getRef=function(e,t){s("GET",o+"/git/refs/"+e,null,function(e,n,o){return e?t(e):void t(null,n.object.sha,o)})},this.createRef=function(e,t){s("POST",o+"/git/refs",e,t)},this.deleteRef=function(t,n){s("DELETE",o+"/git/refs/"+t,e,n)},this.deleteRepo=function(t){s("DELETE",o,e,t)},this.listTags=function(e){s("GET",o+"/tags",null,e)},this.listPulls=function(e,t){e=e||{};var n=o+"/pulls",i=[];"string"==typeof e?i.push("state="+e):(e.state&&i.push("state="+encodeURIComponent(e.state)),e.head&&i.push("head="+encodeURIComponent(e.head)),e.base&&i.push("base="+encodeURIComponent(e.base)),e.sort&&i.push("sort="+encodeURIComponent(e.sort)),e.direction&&i.push("direction="+encodeURIComponent(e.direction)),e.page&&i.push("page="+e.page),e.per_page&&i.push("per_page="+e.per_page)),i.length>0&&(n+="?"+i.join("&")),s("GET",n,null,t)},this.getPull=function(e,t){s("GET",o+"/pulls/"+e,null,t)},this.compare=function(e,t,n){s("GET",o+"/compare/"+e+"..."+t,null,n)},this.listBranches=function(e){s("GET",o+"/git/refs/heads",null,function(t,n,o){return t?e(t):(n=n.map(function(e){return e.ref.replace(/^refs\/heads\//,"")}),void e(null,n,o))})},this.getBlob=function(e,t){s("GET",o+"/git/blobs/"+e,null,t,"raw")},this.getCommit=function(e,t,n){s("GET",o+"/git/commits/"+t,null,n)},this.getSha=function(e,t,n){return t&&""!==t?void s("GET",o+"/contents/"+t+(e?"?ref="+e:""),null,function(e,t,o){return e?n(e):void n(null,t.sha,o)}):f.getRef("heads/"+e,n)},this.getStatuses=function(e,t){s("GET",o+"/statuses/"+e,null,t)},this.getTree=function(e,t){s("GET",o+"/git/trees/"+e,null,function(e,n,o){return e?t(e):void t(null,n.tree,o)})},this.postBlob=function(e,n){if("string"==typeof e)e={content:t.encode(e),encoding:"utf-8"};else if("undefined"!=typeof Buffer&&e instanceof Buffer)e={content:e.toString("base64"),encoding:"base64"};else{if(!("undefined"!=typeof Blob&&e instanceof Blob))throw new Error("Unknown content passed to postBlob. Must be string or Buffer (node) or Blob (web)");e={content:i(e),encoding:"base64"}}s("POST",o+"/git/blobs",e,function(e,t,o){return e?n(e):void n(null,t.sha,o)})},this.updateTree=function(e,t,n,i){var u={base_tree:e,tree:[{path:t,mode:"100644",type:"blob",sha:n}]};s("POST",o+"/git/trees",u,function(e,t,n){return e?i(e):void i(null,t.sha,n)})},this.postTree=function(e,t){s("POST",o+"/git/trees",{tree:e},function(e,n,o){return e?t(e):void t(null,n.sha,o)})},this.commit=function(t,n,i,r){var a=new u.User;a.show(null,function(u,a){if(u)return r(u);var c={message:i,author:{name:e.user,email:a.email},parents:[t],tree:n};s("POST",o+"/git/commits",c,function(e,t,n){return e?r(e):(l.sha=t.sha,void r(null,t.sha,n))})})},this.updateHead=function(e,t,n){s("PATCH",o+"/git/refs/heads/"+e,{sha:t},n)},this.show=function(e){s("GET",o,null,e)},this.contributors=function(e,t){t=t||1e3;var n=this;s("GET",o+"/stats/contributors",null,function(o,s,i){return o?e(o):void(202===i.status?setTimeout(function(){n.contributors(e,t)},t):e(o,s,i))})},this.contents=function(e,t,n){t=encodeURI(t),s("GET",o+"/contents"+(t?"/"+t:""),{ref:e},n)},this.fork=function(e){s("POST",o+"/forks",null,e)},this.listForks=function(e){s("GET",o+"/forks",null,e)},this.branch=function(e,t,n){2===arguments.length&&"function"==typeof arguments[1]&&(n=t,t=e,e="master"),this.getRef("heads/"+e,function(e,o){return e&&n?n(e):void f.createRef({ref:"refs/heads/"+t,sha:o},n)})},this.createPullRequest=function(e,t){s("POST",o+"/pulls",e,t)},this.listHooks=function(e){s("GET",o+"/hooks",null,e)},this.getHook=function(e,t){s("GET",o+"/hooks/"+e,null,t)},this.createHook=function(e,t){s("POST",o+"/hooks",e,t)},this.editHook=function(e,t,n){s("PATCH",o+"/hooks/"+e,t,n)},this.deleteHook=function(e,t){s("DELETE",o+"/hooks/"+e,null,t)},this.read=function(e,t,n){s("GET",o+"/contents/"+encodeURI(t)+(e?"?ref="+e:""),null,n,!0)},this.remove=function(e,t,n){f.getSha(e,t,function(i,u){return i?n(i):void s("DELETE",o+"/contents/"+t,{message:t+" is removed",sha:u,branch:e},n)})},this["delete"]=this.remove,this.move=function(e,t,o,s){n(e,function(n,i){f.getTree(i+"?recursive=true",function(n,u){u.forEach(function(e){e.path===t&&(e.path=o),"tree"===e.type&&delete e.sha}),f.postTree(u,function(n,o){f.commit(i,o,"Deleted "+t,function(t,n){f.updateHead(e,n,s)})})})})},this.write=function(e,t,n,u,r,a){"function"==typeof r&&(a=r,r={}),f.getSha(e,encodeURI(t),function(c,f){var l={message:u,content:"undefined"==typeof r.encode||r.encode?i(n):n,branch:e,committer:r&&r.committer?r.committer:void 0,author:r&&r.author?r.author:void 0};c&&404!==c.error||(l.sha=f),s("PUT",o+"/contents/"+encodeURI(t),l,a)})},this.getCommits=function(e,t){e=e||{};var n=o+"/commits",i=[];if(e.sha&&i.push("sha="+encodeURIComponent(e.sha)),e.path&&i.push("path="+encodeURIComponent(e.path)),e.author&&i.push("author="+encodeURIComponent(e.author)),e.since){var u=e.since;u.constructor===Date&&(u=u.toISOString()),i.push("since="+encodeURIComponent(u))}if(e.until){var r=e.until;r.constructor===Date&&(r=r.toISOString()),i.push("until="+encodeURIComponent(r))}e.page&&i.push("page="+e.page),e.perpage&&i.push("per_page="+e.perpage),i.length>0&&(n+="?"+i.join("&")),s("GET",n,null,t)},this.isStarred=function(e,t,n){s("GET","/user/starred/"+e+"/"+t,null,n)},this.star=function(e,t,n){s("PUT","/user/starred/"+e+"/"+t,null,n)},this.unstar=function(e,t,n){s("DELETE","/user/starred/"+e+"/"+t,null,n)},this.createRelease=function(e,t){s("POST",o+"/releases",e,t)},this.editRelease=function(e,t,n){s("PATCH",o+"/releases/"+e,t,n)},this.getRelease=function(e,t){s("GET",o+"/releases/"+e,null,t)},this.deleteRelease=function(e,t){s("DELETE",o+"/releases/"+e,null,t)}},u.Gist=function(e){var t=e.id,n="/gists/"+t;this.read=function(e){s("GET",n,null,e)},this.create=function(e,t){s("POST","/gists",e,t)},this["delete"]=function(e){s("DELETE",n,null,e)},this.fork=function(e){s("POST",n+"/fork",null,e)},this.update=function(e,t){s("PATCH",n,e,t)},this.star=function(e){s("PUT",n+"/star",null,e)},this.unstar=function(e){s("DELETE",n+"/star",null,e)},this.isStarred=function(e){s("GET",n+"/star",null,e)}},u.Issue=function(e){var t="/repos/"+e.user+"/"+e.repo+"/issues";this.create=function(e,n){s("POST",t,e,n)},this.list=function(e,n){var o=[];Object.keys(e).forEach(function(t){o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}),a(t+"?"+o.join("&"),!!e.page,n)},this.comment=function(e,t,n){s("POST",e.comments_url,{body:t},n)},this.edit=function(e,n,o){s("PATCH",t+"/"+e,n,o)},this.get=function(e,n){s("GET",t+"/"+e,null,n)}},u.Search=function(e){var t="/search/",n="?q="+e.query;this.repositories=function(e,o){s("GET",t+"repositories"+n,e,o)},this.code=function(e,o){s("GET",t+"code"+n,e,o)},this.issues=function(e,o){s("GET",t+"issues"+n,e,o)},this.users=function(e,o){s("GET",t+"users"+n,e,o)}},u.RateLimit=function(){this.getRateLimit=function(e){s("GET","/rate_limit",null,e)}},u}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};s.polyfill&&s.polyfill(),u.getIssues=function(e,t){return new u.Issue({user:e,repo:t})},u.getRepo=function(e,t){return t?new u.Repository({user:e,name:t}):new u.Repository({fullname:e})},u.getUser=function(){return new u.User},u.getGist=function(e){return new u.Gist({id:e})},u.getSearch=function(e){return new u.Search({query:e})},u.getRateLimit=function(){return new u.RateLimit},e.exports=u});
//# sourceMappingURL=github.min.js.map
